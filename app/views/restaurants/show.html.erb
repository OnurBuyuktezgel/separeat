<% content_for :meta_title, "#{@restaurant.name} is on #{DEFAULT_META["meta_product_name"]}" %>
<% content_for :meta_description, @restaurant.category %>
<% content_for :meta_image, cl_image_path(@restaurant.photo.key) %>

<%= render 'shared/restaurantcard' %>

<div style='padding: 16px 0 0 0'><%= render 'shared/searchform' %></div>

<%= render 'shared/categorycard' %>

<% unless @starters.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Starters" class= "anchor"><h3 name="Starters" style="font-size: 20px; font-weight: bold; padding-left: 14px">Starters</h3></a></div>
<% end %>
<% @starters.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>

    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>

  </div>
<% end %>

<% unless @soups.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Soups" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Soups</h3></a></div>
<% end %>
<% @soups.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @salads.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Salads" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Salads</h3></a></div>
<% end %>
<% @salads.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @main_dishes.empty? %>
  <div style='padding: 16px 0 0 0'><a name="MainDishes" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Main Dishes</h3></a></div>
<% end %>
<% @main_dishes.sort_by! { |obj| obj.price }.each do |dish| %>
    <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @meats.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Meat" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Meat</h3></a></div>
<% end %>
<% @meats.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @fishes.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Fish" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Fish</h3></a></div>
<% end %>
<% @fishes.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @pastas.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Pasta" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Pasta</h3></a></div>
<% end %>
<% @pastas.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @veggies.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Vegetarian" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Vegetarian</h3></a></div>
<% end %>
<% @veggies.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @vegans.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Vegan" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Vegan</h3></a></div>
<% end %>
<% @vegans.sort_by! { |obj| obj.price }.each do |dish| %>
  <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @desserts.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Desserts" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Desserts</h3></a></div>
<% end %>
<% @desserts.sort_by! { |obj| obj.price }.each do |dish| %>
    <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @beverages.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Beverages" class= "anchor"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Beverages</h3></a></div>
<% end %>
<% @beverages.sort_by! { |obj| obj.price }.each do |dish| %>
    <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @beers.sort_by! { |obj| obj.price }.empty? %>
  <div style='padding: 16px 0 0 0'><a name="Beers"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Beers</h3></a></div>
<% end %>
<% @beers.each do |dish| %>
    <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @alc_bevs.empty? %>
  <div style='padding: 16px 0 0 0'><a name="AlcoholicBeverages"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Alcoholic Beverages</h3></a></div>
<% end %>
<% @alc_bevs.sort_by! { |obj| obj.price }.each do |dish| %>
    <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% unless @hot_bevs.empty? %>
  <div style='padding: 16px 0 0 0'><a name="HotBeverages"><h3 style="font-size: 20px; font-weight: bold; padding-left: 14px">Hot Beverages</h3></a></div>
<% end %>
<% @hot_bevs.sort_by! { |obj| obj.price }.each do |dish| %>
    <div class="card-dish" id="dish_id_<%= dish.id %>" style='margin-top: 16px'>
    <% if dish.photo.attached? %>
      <%= cl_image_tag dish.photo.key, height: 300, width: 400, crop: :fill %>
    <% else %>
      <img src="https://images.unsplash.com/photo-1566935367576-6e0e852215d1?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=750&q=80" />
    <% end %>
    <div class="card-dish-infos">
      <h2><%= dish.name %> / <%= number_with_precision(dish.price, precision: 2) %> €</h2>
      <p><%= dish.description %></p>
    </div>
    <div data-controller="order">
      <div data-target="order.content">
        <%= link_to visit_new_order_path(@visit, dish_id: dish.id), method: :POST, remote: true do %>
          <button class="btn-ghost added" data-action="click->order#sayAdded">+</button>
        <% end %>
      </div>
    </div>
  </div>
<% end %>

<% if @restaurant.user == current_user %>
  <div style='padding: 16px 0 0 0'><h3>Add a Dish</h3></div>
  <div style='padding: 16px 0 0 0'>
    <%= render 'dishes/form' %>
  </div>
<% end %>

<!-- Modal -->
<div class="modal fade" id="orderConfirmModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h1>Added to your order.<i class="far fa-check-circle"></i></h1>
        <h1 class="modal-title" id="exampleModalLongTitle"></h1>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      </div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>
